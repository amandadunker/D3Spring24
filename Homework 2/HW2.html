<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Songs I Can't Really Play</title>
        <script src= "https://d3js.org/d3.v7.min.js"></script>
        <style type="text/css">
        /* TBD*/
        </style>
    </head>
    <body>
        <script type="text/javascript">

//1. Declare consts/global variables
        const margin = 30;
        const svgWidth = 500; 
        const svgHeight = 500;
        const radius = 4; 
        
//2. Load data and relevant variables
d3.csv("songs.csv").then(data => {
    data.forEach(d => {
        d.Year = d.Year;
        d.BPM = +d.BPM;
        d.Song = d.Song;
        d.Artist = d.Artist;
    });
    const minX = (d3.min(data, d => d.Year)) - 5;
    const maxX = d3.max(data, d => d.Year);
    const minY = (d3.min(data, d => d.BPM)) - 5;
    const maxY = (d3.max(data, d => d.BPM)) + 5;

    console.log("data", data);

//3. Scale using d3.max
    const xScale = d3.scaleLinear()
                    .domain([minX, maxX])
                    .range([margin, svgWidth - margin]);
                    
    const yScale = d3.scaleLinear()
                    .domain([minY, maxY])
                    .range([svgHeight - margin, margin]);

//4. SVG
const svg = d3.select("body")
                .append("svg")
                .attr("width", svgWidth)
                .attr("height", svgHeight);
        
//5. Create and implement axes

    //create bottom (x) axis
    const bottomAxis = d3.axisBottom()
                        .scale(xScale)
                        //.ticks(5);
    
    //implement x axis
    svg.append("g")
        .attr("transform", "translate(0," + (svgHeight -margin) + ")")
        .call(bottomAxis);

    //create left(y) axis
    const leftAxis = d3.axisLeft()
                        .scale(yScale)
                        //.ticks(20);

    //implement y axis
    svg.append("g")
        .attr("transform", "translate(" + margin + ",0)")
        .call(leftAxis);

//6. Create circles
svg.selectAll("circle")
    .data(data)
    .enter()
    .append("circle")
    .attr("cx", d => xScale(d.Year))
    .attr("cy", d => yScale(d.BPM))
    .attr("r", radius)
    .attr("fill", "pink")

//7. Labels
    /*svg.selectAll("text")
            .data(data)
           .enter()
           .append("text")
           .text(d =>d)
           .attr("x", d => xScale(d.Year))
            .attr("y", d => yScale(d.BPM))
          //  .attr("fill", "green")
         //   .attr("font-weight", "bold");

})

</script>
</body>
</html>